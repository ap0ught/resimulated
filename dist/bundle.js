!function(e){var n={};function o(r){if(n[r])return n[r].exports;var t=n[r]={i:r,l:!1,exports:{}};return e[r].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=e,o.c=n,o.d=function(e,n,r){o.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,n){if(1&n&&(e=o(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var t in e)o.d(r,t,function(n){return e[n]}.bind(null,t));return r},o.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(n,"a",n),n},o.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},o.p="",o(o.s=7)}([function(e,n,o){"use strict";o.r(n),n.default="#version 300 es\n\ninvariant gl_Position;\nin vec2 vert2d;\n\nvoid main(void) {\n  gl_Position = vec4(vert2d, 0, 1);\n}\n"},function(e,n,o){"use strict";o.r(n),n.default="#version 300 es\nprecision highp float;\nprecision highp int;\nprecision mediump sampler3D;\nuniform vec3 iResolution;\nuniform float iTime;\n\n#define saturate(x) clamp(x, 0.0, 1.0)\n#define PI 3.14159265359\n#define PI2 6.28318530718\n#define EPS 0.0001\n\n#define BPM 120.0\n#define LEN 32.0\n#define _beat (iTime * BPM / 60.0)\n#define beat (mod(_beat, LEN))\n\nfloat sdRect(vec2 p, vec2 b) {\n    vec2 d = abs(p) - b;\n    return max(d.x, d.y) + min(max(d.x, d.y), 0.0);\n}\n\nmat2 rot(float x)\n{\n    return mat2(cos(x), sin(x), -sin(x), cos(x));\n}\n\nvec3 hsv2rgb(vec3 c)\n{\n\tvec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n\tvec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n\treturn c.z * mix(K.xxx, saturate(p - K.xxx), c.y);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 p = (fragCoord.xy * 2.0 - iResolution.xy) / min(iResolution.x, iResolution.y);\n\n    // https://www.shadertoy.com/view/MdKfWR\n    vec2 q = p;\n    float d = 9999.0;\n    float z = PI2 * (beat + 16.0) / LEN;\n    for (int i = 0; i < 5; ++i) {\n        q = abs(q) - 0.5;\n        q *= rot(0.7);\n        q = abs(q) - 0.5;\n        q *= rot(z);\n        q *= 1.5;\n        float k = sdRect(q, vec2(0.5, 0.3 + q.x));\n        d = min(d, k);\n    }\n\n    float s = saturate(abs(0.2 / q.x));\n    vec3 col = hsv2rgb(vec3((beat + 16.0) / LEN, 1.0 - 0.6 * s, s)) * saturate(-2.0 * d);\n    col = pow(col * 2.0, vec3(2.0));\n    fragColor = vec4(col,1.0);\n}\n\nout vec4 outColor;\nvoid main( void ){vec4 color = vec4(0.0,0.0,0.0,1.0);mainImage( color, gl_FragCoord.xy );color.w = 1.0;outColor = color;}"},function(e,n,o){"use strict";o.r(n),n.default="#version 300 es\nprecision highp float;\nprecision highp int;\nprecision mediump sampler3D;\nuniform vec3 iResolution;\nuniform float iTime;\n\n// uniform sampler2D iPass0;\nuniform sampler2D iPrevPass;\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = fragCoord / iResolution.xy;\n\n    // invert\n    vec3 col = vec3(1.0) - texture(iPrevPass, uv).rgb;\n\n    // Output to screen\n    fragColor = vec4(col, 1.0);\n}\n\nout vec4 outColor;\nvoid main( void ){vec4 color = vec4(0.0,0.0,0.0,1.0);mainImage( color, gl_FragCoord.xy );color.w = 1.0;outColor = color;}"},function(e,n,o){"use strict";o.r(n),n.default="#version 300 es\nprecision highp float;\nprecision highp int;\nprecision mediump sampler3D;\nuniform vec3 iResolution;\nuniform float iTime;\n\n// uniform sampler2D iPass0;\nuniform sampler2D iPrevPass;\n\n#define saturate(x) clamp(x, 0.0, 1.0)\n\nfloat sdCircle(vec2 p, float r) {\n    return length(p) - r;\n}\n\n// Dot Matrix\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = (fragCoord / iResolution.xy) * 2.0 - 1.0;\n\n    float ny = 20.0;\n    float nx = ny * iResolution.x / iResolution.y;\n    vec2 num = vec2(nx, ny);\n\n    vec3 col;\n    vec2 uvDot = (((floor(uv * num) + 0.5) / num) + 1.0) * 0.5;\n    vec3 lum = texture(iPrevPass, uvDot).rgb;\n\n    vec2 uvGrid = fract(uv * num);\n    vec2 pGrid = uvGrid - 0.5;\n    col = (lum + 0.05) * 5.0 * saturate(-sdCircle(pGrid, 0.5));\n\n    fragColor = vec4(col, 1.0);\n}\n\nout vec4 outColor;\nvoid main( void ){vec4 color = vec4(0.0,0.0,0.0,1.0);mainImage( color, gl_FragCoord.xy );color.w = 1.0;outColor = color;}"},function(e,n,o){"use strict";o.r(n),n.default="#version 300 es\nprecision highp float;\nprecision highp int;\nprecision mediump sampler3D;\nuniform vec3 iResolution;\nuniform float iTime;\n\nuniform sampler2D iPrevPass;\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    // Normalized pixel coordinates (from 0 to 1)\n    vec2 uv = fragCoord / iResolution.xy;\n\n    vec3 col;\n\n    vec2 offset = vec2(1.0, 1.0) * 0.01;\n    col.r = texture(iPrevPass, uv - offset).r;\n    col.g = texture(iPrevPass, uv).g;\n    col.b = texture(iPrevPass, uv + offset).b;\n\n    // Output to screen\n    fragColor = vec4(col, 1.0);\n}\n\nout vec4 outColor;\nvoid main( void ){vec4 color = vec4(0.0,0.0,0.0,1.0);mainImage( color, gl_FragCoord.xy );color.w = 1.0;outColor = color;}"},function(e,n,o){"use strict";o.r(n),n.default="#version 300 es\nprecision mediump float;\nuniform float iSampleRate;\nuniform float iBlockOffset;\n\nfloat tri(in float freq, in float time)\n{\n    return -abs(1. - mod(freq * time * 2., 2.));\n}\n\nvec2 mainSound(float time)\n{\n    float freq = 440.;\n    freq *= pow(1.06 * 1.06, floor(mod(time, 6.)));\n    return vec2(\n        tri(freq, time) * sin(time * 3.141592),\n        tri(freq * 1.5, time) * sin(time * 3.141592));\n}\n\nout vec4 outColor;\nvoid main()\n{\n    float t = iBlockOffset + ((gl_FragCoord.x - 0.5) + (gl_FragCoord.y - 0.5) * 512.0) / iSampleRate;\n    vec2 y = mainSound(t);\n    vec2 v = floor((0.5 + 0.5 * y) * 65536.0);\n    vec2 vl = mod(v, 256.0) / 255.0;\n    vec2 vh = floor(v / 256.0) / 255.0;\n    outColor = vec4(vl.x, vh.x, vl.y, vh.y);\n}"},function(e,n,o){"use strict";o.r(n),n.default="body{background-color:#000;margin:0;padding:0;color:#fff}canvas{display:block;position:absolute;top:0;left:0;right:0;bottom:0;margin:auto}#c{display:none}"},function(e,n,o){"use strict";var r;o.r(n),function(e){e[e.Image=0]="Image",e[e.FinalImage=1]="FinalImage",e[e.Sound=2]="Sound"}(r||(r={}));var t=function(){},i=6,a=512,u=512,l=function(){function e(e,n,o){var l=this;this.isPlaying=!0,this.time=0;var c=this.audioContext=new window.AudioContext,f=document.createElement("canvas");f.width=window.innerWidth,f.height=window.innerHeight,window.document.body.appendChild(f),this.uniforms={iResolution:{type:"v3",value:[f.width,f.height,0]},iTime:{type:"f",value:0},iPrevPass:{type:"t",value:0},iBlockOffset:{type:"f",value:0},iSampleRate:{type:"f",value:c.sampleRate}};var s=this.gl=f.getContext("webgl2");if(s){s.enable(s.CULL_FACE);var d=[[1,1],[-1,1],[1,-1],[-1,-1]],v=new Float32Array([].concat.apply([],d)),m=s.createBuffer();s.bindBuffer(s.ARRAY_BUFFER,m),s.bufferData(s.ARRAY_BUFFER,v,s.STATIC_DRAW),s.bindBuffer(s.ARRAY_BUFFER,null);var p=[[0,1,2],[3,2,1]],g=new Uint16Array([].concat.apply([],p)),E=s.createBuffer();s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,E),s.bufferData(s.ELEMENT_ARRAY_BUFFER,g,s.STATIC_DRAW),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,null);var R=s.createVertexArray(),x=function(e,n){var o=s.createShader(n);return s.shaderSource(o,e),s.compileShader(o),s.getShaderParameter(o,s.COMPILE_STATUS)||console.log(e,s.getShaderInfoLog(o)),o},h=function(n){var o=[x(e,s.VERTEX_SHADER),x(n,s.FRAGMENT_SHADER)],r=s.createProgram();return o.forEach((function(e){return s.attachShader(r,e)})),s.linkProgram(r),s.getProgramParameter(r,s.LINK_STATUS)||console.log(s.getProgramInfoLog(r)),r},T=function(e,n,o){!function(e){s.bindVertexArray(R),s.bindBuffer(s.ARRAY_BUFFER,m),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,E);var n=s.getAttribLocation(e,"vert2d"),o=s.FLOAT,r=d[0].length,t=r*Float32Array.BYTES_PER_ELEMENT;s.enableVertexAttribArray(n),s.vertexAttribPointer(n,r,o,!1,t,0),s.bindVertexArray(null)}(e);var r=new t;return r.type=o,r.index=n,r.program=e,r.locations=function(e){var n={};return Object.keys(l.uniforms).forEach((function(o){n[o]=s.getUniformLocation(e,o)})),n}(e),l.setupFrameBuffer(r,f.width,f.height),r},b=function(e){s.useProgram(e.program),s.bindFramebuffer(s.FRAMEBUFFER,e.frameBuffer),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT);for(var n=0,o=Object.entries(l.uniforms);n<o.length;n++){var r=o[n],t=r[0],i=r[1],a="iPrevPass"===t;"t"!==i.type||a||(s.activeTexture(s.TEXTURE0+i.value),s.bindTexture(s.TEXTURE_2D,l.imagePasses[i.value].texture));var u={f:s.uniform1f,v3:s.uniform3fv,t:s.uniform1i},c=a?Math.max(e.index-1,0):i.value;u[i.type].call(s,e.locations[t],c)}s.bindVertexArray(R);var f=0*p[0].length;s.drawElements(s.TRIANGLES,g.length,s.UNSIGNED_SHORT,f);var d=s.getError();d!==s.NO_ERROR&&console.log(d),s.bindVertexArray(null),s.useProgram(null)};n.forEach((function(e,n){l.uniforms["iPass"+n]={type:"t",value:n}})),this.imagePasses=n.map((function(e,n,o){return T(h(e),n,n<o.length-1?r.Image:r.FinalImage)}));for(var y=c.createBuffer(2,c.sampleRate*i,c.sampleRate),_=a*u,P=c.sampleRate*i/_,A=h(o),F=T(A,0,r.Sound),C=0;C<P;C++){this.uniforms.iBlockOffset.value=C*_/c.sampleRate,b(F);var S=new Uint8Array(a*u*4);s.readPixels(0,0,a,u,s.RGBA,s.UNSIGNED_BYTE,S);for(var B=y.getChannelData(0),D=y.getChannelData(1),U=0;U<_;U++)B[C*_+U]=(S[4*U+0]+256*S[4*U+1])/65535*2-1,D[C*_+U]=(S[4*U+2]+256*S[4*U+3])/65535*2-1}this.audioSource=c.createBufferSource(),this.audioSource.buffer=y,this.audioSource.loop=!0,this.audioSource.connect(c.destination);var I=0,w=0,L=function(e){requestAnimationFrame(L);var n=.001*(e-I);(l.isPlaying||w!==l.time)&&(l.uniforms.iTime.value=l.time,l.imagePasses.forEach((function(e){return b(e)})),l.time+=n,w=l.time),I=e};L(0)}else console.log("WebGL 2 is not supported...")}return e.prototype.setupFrameBuffer=function(e,n,o){if(e.type!==r.FinalImage){e.type===r.Sound&&(n=a,o=u);var t=this.gl;e.frameBuffer=t.createFramebuffer(),t.bindFramebuffer(t.FRAMEBUFFER,e.frameBuffer),e.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,e.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n,o,0,t.RGBA,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e.texture,0),t.bindTexture(t.TEXTURE_2D,null),t.bindRenderbuffer(t.RENDERBUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null)}},e.prototype.setSize=function(e,n){},e.prototype.stopSound=function(){this.audioSource.stop()},e.prototype.playSound=function(){var e=this.audioContext.createBufferSource();e.buffer=this.audioSource.buffer,e.loop=this.audioSource.loop,e.connect(this.audioContext.destination),this.audioSource=e,this.audioSource.start(this.audioContext.currentTime,this.time%i)},e}();window.addEventListener("load",(function(e){new l(o(0).default,[o(1).default,o(2).default,o(3).default,o(4).default],o(5).default).playSound();var n=document.createElement("style");n.innerText=o(6).default,document.head.appendChild(n)}),!1)}]);